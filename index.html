<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FitPrint - Smart Image Layout for Printing</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="manifest" href="site.webmanifest">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="logo-section">
                    <img src="logo.png" alt="FitPrint Logo" class="header-logo" onerror="this.style.display='none'">
                </div>
                <div class="nav-controls">
                    <button id="navToggle" class="nav-toggle" title="Navigation">
                        <span class="nav-icon">‚ò∞</span>
                    </button>
                    <button id="themeToggle" class="theme-btn" title="Toggle dark mode">
                        <span class="theme-icon">üåô</span>
                    </button>
                </div>
                <div class="title-section">
                    <h1>FitPrint</h1>
                    <p>Smart image layout for optimal printing</p>
                </div>
            </div>
        </header>

        <!-- Navigation Sidebar -->
        <nav id="sidebar" class="sidebar">
            <div class="sidebar-content">
                <h3>Navigation</h3>
                <ul class="nav-list">
                    <li><a href="#upload" class="nav-link" data-section="upload-section">üìÅ Upload Images</a></li>
                    <li><a href="#images" class="nav-link" data-section="images-section">üñºÔ∏è Image Configuration</a></li>
                    <li><a href="#settings" class="nav-link" data-section="settings-section">‚öôÔ∏è Print Settings</a></li>
                    <li><a href="#actions" class="nav-link" data-section="actions-section">üéØ Generate Layout</a></li>
                    <li><a href="#preview" class="nav-link" data-section="preview-section">üëÅÔ∏è Layout Preview</a></li>
                </ul>
            </div>
        </nav>

        <!-- Sidebar Overlay for mobile -->
        <div id="sidebarOverlay" class="sidebar-overlay"></div>

        <main>
            <section id="upload" class="upload-section">
                <h2>üìÅ Upload Images</h2>
                <div class="file-upload">
                    <input type="file" id="imageInput" multiple accept="image/*">
                    <label for="imageInput" class="upload-btn">
                        <span class="upload-icon">üìé</span>
                        Choose Images
                    </label>
                    <div class="upload-info">
                        <p>Drag & drop images here or click to browse</p>
                        <p class="upload-formats">Supports: JPG, PNG, GIF, WEBP</p>
                    </div>
                </div>
            </section>

            <section id="images" class="images-section">
                <h2>üñºÔ∏è Image Configuration</h2>
                
                <!-- Bulk Edit Section -->
                <div class="bulk-edit-section">
                    <h3 onclick="fitPrint.toggleBulkEdit()" class="bulk-edit-header">
                        üì¶ Bulk Edit Selected Images<span id="bulkToggleIcon" class="toggle-icon"></span>
                    </h3>
                    <div class="bulk-controls" id="bulkControls">
                        <div>
                            <button id="selectAll" class="bulk-btn">Select All</button>
                            <button id="selectNone" class="bulk-btn">Select None</button>
                            <button id="removeSelected" class="bulk-btn danger">Remove Selected</button>
                        </div>
                        <div class="bulk-inputs">
                            <span id="selectionCount">0 images selected</span>
                            <div class="bulk-input-group">
                                <label>Width (mm):</label>
                                <input type="number" id="bulkWidth" min="1" step="0.1" placeholder="Width">
                                <button id="lockRatio" class="ratio-lock-btn active" title="Lock aspect ratio">üîí</button>
                            </div>
                            <div class="bulk-input-group">
                                <label>Height (mm):</label>
                                <input type="number" id="bulkHeight" min="1" step="0.1" placeholder="Height">
                            </div>
                            <div class="bulk-input-group">
                                <label>Copies:</label>
                                <input type="number" id="bulkCopies" min="1" placeholder="Copies">
                            </div>
                            <button id="applyBulkChanges" class="action-btn primary">Apply to Selected</button>
                        </div>
                    </div>
                </div>
                
                <!-- Images List -->
                <div id="imagesList" class="images-list"></div>
            </section>

            <section id="settings" class="settings-section">
                <h2>‚öôÔ∏è Print Settings</h2>
                <div class="settings-grid">
                    <div class="setting-group">
                        <label for="paperSize">Paper Size:</label>
                        <select id="paperSize">
                            <option value="custom">Custom</option>
                            <option value="a4" selected>A4 (210√ó297mm)</option>
                            <option value="a3">A3 (297√ó420mm)</option>
                            <option value="a5">A5 (148√ó210mm)</option>
                            <option value="letter">Letter (216√ó279mm)</option>
                            <option value="legal">Legal (216√ó356mm)</option>
                            <option value="tabloid">Tabloid (279√ó432mm)</option>
                            <option value="photo4x6">Photo 4√ó6 (102√ó152mm)</option>
                            <option value="photo5x7">Photo 5√ó7 (127√ó178mm)</option>
                            <option value="photo8x10">Photo 8√ó10 (203√ó254mm)</option>
                        </select>
                    </div>
                    <div class="setting-group">
                        <label for="paperOrientation">Orientation:</label>
                        <select id="paperOrientation">
                            <option value="portrait">Portrait</option>
                            <option value="landscape">Landscape</option>
                            <option value="auto">Auto (Best Fit)</option>
                        </select>
                    </div>
                    <div class="setting-group">
                        <label for="paperWidth">Paper Width (mm):</label>
                        <input type="number" id="paperWidth" value="210" min="1">
                    </div>
                    <div class="setting-group">
                        <label for="paperHeight">Paper Height (mm):</label>
                        <input type="number" id="paperHeight" value="297" min="1">
                    </div>
                    <div class="setting-group">
                        <label for="outerMargin">Outer Margin (mm):</label>
                        <input type="number" id="outerMargin" value="10" min="0" step="0.1">
                    </div>
                    <div class="setting-group">
                        <label for="innerMargin">Image Spacing (mm):</label>
                        <input type="number" id="innerMargin" value="5" min="0" step="0.1">
                        <small>Space between images</small>
                    </div>
                    <div class="setting-group">
                        <label for="packingStrategy">Packing Strategy:</label>
                        <select id="packingStrategy">
                            <option value="efficient">Efficient (Minimize pages)</option>
                            <option value="balanced">Balanced (Good fit)</option>
                            <option value="loose">Loose (More spacing)</option>
                        </select>
                    </div>
                    <div class="setting-group">
                        <label for="rotateImages">Allow Rotation:</label>
                        <div class="checkbox-group">
                            <input type="checkbox" id="rotateImages" checked>
                            <label for="rotateImages" class="checkbox-label">Rotate images for better fit</label>
                        </div>
                    </div>
                    <div class="setting-group">
                        <label for="imageQuality">Export Quality:</label>
                        <select id="imageQuality">
                            <option value="1.0">High Quality (No Compression)</option>
                            <option value="0.9" selected>Very Good (90%)</option>
                            <option value="0.8">Good (80%)</option>
                            <option value="0.7">Medium (70%)</option>
                            <option value="0.5">Low (50%)</option>
                        </select>
                        <small>Higher quality = larger file size</small>
                    </div>
                </div>
            </section>

            <section id="actions" class="actions-section">
                <button id="generateLayout" class="action-btn primary">
                    <span class="btn-icon">üéØ</span>
                    Generate Layout
                </button>
                <button id="exportPDF" class="action-btn secondary">
                    <span class="btn-icon">üìÑ</span>
                    Export to PDF
                </button>
            </section>

            <!-- Loading Overlay -->
            <div id="loadingOverlay" class="loading-overlay hidden">
                <div class="loading-content">
                    <div class="loading-spinner"></div>
                    <h3>Generating Layout...</h3>
                    <p>Optimizing image placement for maximum efficiency</p>
                </div>
            </div>

            <section id="preview" class="preview-section">
                <h2>üëÅÔ∏è Layout Preview</h2>
                <div id="layoutPreview" class="layout-preview"></div>
                <div id="layoutStats" class="layout-stats"></div>
            </section>
        </main>
        
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-info">
                    <p>&copy; 2025 Glare Studios. All rights reserved.</p>
                </div>
                <div class="footer-actions">
                    <form action="https://paypal.me/itsjakovj" method="post" target="_top">
                        <input type="hidden" name="business" value="jakov@jandric.com" />
                        <input type="hidden" name="currency_code" value="USD" />
                        <input type="hidden" name="item_name" value="Buy me a coffee" />
                        <button type="submit" class="paypal-btn" title="Buy me a coffee">
                            ‚òï Buy me a coffee
                        </button>
                    </form>
                </div>
            </div>
        </footer>
    </div>

    <!-- Image Modal/Lightbox -->
    <div id="imageModal" class="image-modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <button class="modal-close" title="Close (ESC)">&times;</button>
            <img id="modalImage" class="modal-image" src="" alt="Full size image">
            <div class="modal-info">
                <span id="modalImageName" class="image-name"></span>
                <span id="modalImageSize" class="image-size"></span>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
